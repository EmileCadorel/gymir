

GYC_INSTALL_NAME := $(shell echo gyc|sed '$(program_transform_name)')
GYC_TARGET_INSTALL_NAME := $(target_noncanonical)-$(shell echo gyc|sed '$(program_transform_name)')

ymir: ymir1$(exeext)
 
.PHONY: ymir

GYC_INCLUDES = -I$(srcdir)/include -I$(srcdir)/ 

CFLAGS-ymir/gycspec.o += $(DRIVER_DEFINES)

# Driver
GYC_OBJS = $(GCC_OBJS) ymir/gycspec.o
 
gyc$(exeext): $(GYC_OBJS) $(EXTRA_GCC_OBJS) libcommon-target.a $(LIBDEPS)
	+$(LINKER) $(ALL_LINKERFLAGS) $(LDFLAGS) $(GYC_INCLUDES) -o $@ \
	  $(GYC_OBJS) $(EXTRA_GCC_OBJS) libcommon-target.a \
	  $(EXTRA_GCC_LIBS) $(LIBS)
		    
# The compiler proper
 
ymir_OBJS = \
	ymir/astExpression.o \
	ymir/FixedInfo.o \
	ymir/Token.o \
	ymir/VoidInfo.o \
	ymir/ymir1.o \
	ymir/UndefInfo.o \
	ymir/ArrayInfo.o \
	ymir/InfoType.o \
	ymir/StringInfo.o \
	ymir/CharInfo.o \
	ymir/OutBuffer.o \
	ymir/PureFrame.o \
	ymir/Symbol.o \
	ymir/astAux.o \
	ymir/Scope.o \
	ymir/RangeInfo.o \
	ymir/PtrFuncInfo.o \
	ymir/Visitor.o \
	ymir/RefInfo.o \
	ymir/NullInfo.o \
	ymir/Lexer.o \
	ymir/PtrInfo.o \
	ymir/Module.o \
	ymir/Frame.o \
	ymir/FunctionInfo.o \
	ymir/ExternFrame.o \
	ymir/BoolInfo.o \
	ymir/Range.o \
	ymir/Word.o \
	ymir/Error.o \
	ymir/FloatInfo.o \
	ymir/FrameProto.o \
	ymir/Namespace.o \
	ymir/FinalFrame.o \
	ymir/astPrint.o \
	ymir/astInstruction.o \
	ymir/astDeclaration.o \
	ymir/Table.o \
	ymir/FrameTable.o \
	ymir/EnumInfo.o \
	ymir/Parser.o \
	ymir/Creators.o \
	ymir/FrameScope.o \
	ymir/Mangler.o \
	ymir/Keys.o \
	ymir/Value.o \
	ymir/Tree.o \
	ymir/astGeneric.o \
	ymir/Generic.o \
	ymir/InternalFunction.o \
	ymir/TupleInfo.o \
	ymir/UnPureFrame.o \
	ymir/IgnoreInfo.o \
	ymir/TemplateSolver.o \
	ymir/TemplateFrame.o \
	ymir/astTemplate.o \
	ymir/memory.o \
	ymir/LambdaFrame.o \
	ymir/StructInfo.o \
	ymir/DestructSolver.o \
	ymir/Options.o \
	ymir/ModuleInfo.o \
	ymir/MacroInfo.o \
	ymir/MacroSolver.o \
	ymir/AggregateInfo.o \
	ymir/MethodFrame.o \
	ymir/ConstructFrame.o \
	ymir/DestructFrame.o \
	ymir/TemplateMethFrame.o \
	ymir/MethodInfo.o \
	ymir/AliasInfo.o \
	ymir/TraitInfo.o \
	ymir/Runtime.o \
	$(END)	

ymir1$(exeext): attribs.o $(ymir_OBJS) $(BACKEND) $(LIBDEPS)
	+$(LLINKER) $(ALL_LINKERFLAGS) $(LDFLAGS) -o $@ \
	attribs.o $(ymir_OBJS) $(BACKEND) $(LIBS) $(BACKENDLIBS)
 
ymir.all.cross: 
 
ymir.start.encap: gyc$(exeext)
ymir.rest.encap:

selftest-ymir:

ymir.install-common: installdirs
	-rm -f $(DESTDIR)$(bindir)/$(GYC_INSTALL_NAME)$(exeext)
	$(INSTALL_PROGRAM) gyc$(exeext) $(DESTDIR)$(bindir)/$(GYC_INSTALL_NAME)$(exeext)
	rm -f $(DESTDIR)$(bindir)/$(GYC_TARGET_INSTALL_NAME)$(exeext); \
	( cd $(DESTDIR)$(bindir) && \
      $(LN) $(GYC_INSTALL_NAME)$(exeext) $(GYC_TARGET_INSTALL_NAME)$(exeext) ); \
 
# Required goals, they still do nothing
ymir.install-man:
ymir.install-info:
ymir.install-pdf:
ymir.install-plugin:
ymir.install-html:
ymir.info:
ymir.dvi:
ymir.pdf:
ymir.html:
ymir.man:
ymir.mostlyclean:
ymir.clean:
ymir.distclean:
ymir.maintainer-clean:


# make uninstall
ymir.uninstall:

	-rm -f gyc$(exeext) ymir1$(exeext)
	-rm -f $(ymir_OBJS)
 
# Used for handling bootstrap
ymir.stage1: stage1-start
	-mv ymir/*$(objext) stage1/ymir
ymir.stage2: stage2-start
	-mv ymir/*$(objext) stage2/ymir
ymir.stage3: stage3-start
	-mv ymir/*$(objext) stage3/ymir
ymir.stage4: stage4-start
	-mv ymir/*$(objext) stage4/ymir
ymir.stageprofile: stageprofile-start
	-mv ymir/*$(objext) stageprofile/ymir
ymir.stagefeedback: stagefeedback-start
	-mv ymir/*$(objext) stagefeedback/ymir
